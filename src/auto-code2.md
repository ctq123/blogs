# 自动化生成代码的实践和探索

由上一篇文章我们介绍了几种代码自动化生成的方式，今天跟大家分享一下我们对自动化生成代码的实践和探索。

本文主要是对之前开发的一个总结，当初由于某些原因没有进行分享和总结，当时我们的开发模式和搭建器还没有那么地完善。

本文主要解决的是开发效率低的问题，通过一键生成可调试源码的方式减少开发成本和提高效率，效果如下

## 现状
目前我们中后台的很多页面都很相似，这些页面大多为列表页，编辑页和详情页，也就是“四表一单”中的几个，这些页面写起来也是挺繁琐重复的事情。

目前我们的开发模式大多数是这样，若要开发一个新的模块，先拷贝之前写好的相似模块页面到新的模块中，然后再此基础上进行逻辑的删改处理，然后与根据后端提供的接口，到mock平台中修改其中的字段，自测通过后与后端进行联调，联调完成并执行测试用例并提测，到此开发阶段结束。后续再进行跟测。

目前采用这种开发模式会出现以下几个问题：
- 页面重复率高，开发繁琐
- 在mock平台与vscode来回切换
- 修改字段多且繁琐，容易出错
- 团队各成员的代码风格不统一
- 开发效率相对较低
## 分析
无论是低代码或者无代码搭建器，从运行模式上看，目前市场中搭建器主要分为两种，**一种运行时模式，另一种非运行时模式**。

**1）运行时模式**：通常指的是通过搭建器搭建好之后，通过向外提供SDK或链接形式，直接访问搭建好的页面和应用。

**2）非运行时模式**：通常指的是通过搭建器搭建好之后，最终输出的是源码，向其他应用提供服务，与传统开发模式无异，只是理论上源码不需要开发者自己写。

首先我们内部的中后台搭建器属于运行时模式，意味着需要使用整套服务，对独立的新系统友好，但也存在一定的局限性：
- 扩展性较弱，业务需求要与搭建器开发者跟进
- 抗风险弱，哪天需求变了，搭建器无法搭建时，二次的迁移成本和风险随之而来
- 兼容性弱，无法很好地与老系统共存，包括UI风格
- 风险高，搭建器的修改，直接影响所有系统，稳定性的风险提高

当然这里不是否定搭建器的作用，相反我是搭建器的开发者和支持者，任何一种设计都有其适用场景和缺陷。针对这种场景，我认为输出源码的搭建器才更适合传统的开发模式，原因如下：
1）拥有代码掌控权，意味着你拥有绝对控制权，无信任危机
2）稳定性得到保证，业务与搭建器完全隔离，即使搭建器出bug也不会影响正常业务系统的运行
3）消除潜在的未知风险，业务需求怎么变都可以灵活修改，因为源码在你手上，不存在二次迁移成本和风险
4）扩展性和兼容性都很强

当然，非运行时搭建器，即输出源码的形式也有其短板，后面我会讲到，这里的提到的优点，只是针对快速与开发模式结合的场景。

> 非运行时模式，不一定是一个完整的UI搭建器，它也可以是一个接口服务，只要最终输出源码即可
## 目标
针对上述现状，我们需要想要实现的目标：
1）快速与传统开发模式结合
2）保持足够强的灵活性
3）避免重复工作
4）保持足够的简单易用性
5）避免多个平台切换来回修改字段
6）保持风格统一，降低维护成本
7）输出可运行且可维护的源码
8）消除未知的潜在迁移成本和风险

## 实现


## 未来展望
目前的缺陷
改进方案
